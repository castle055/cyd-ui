.TH "cydui::components::component_t< EVH, T >" 3 "CYD-UI" \" -*- nroff -*-
.ad l
.nh
.SH NAME
cydui::components::component_t< EVH, T >
.SH SYNOPSIS
.br
.PP
.PP
\fC#include <component\&.h>\fP
.PP
Inherits \fBcydui::components::component_base_t\fP, and \fBattrs_component< T >\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fB~component_t\fP () override"
.br
.ti -1c
.RI "void \fBconfigure_event_handler\fP () override"
.br
.ti -1c
.RI "void \fBsubscribe_events\fP () override"
.br
.ti -1c
.RI "void \fBclear_children\fP () override"
.br
.ti -1c
.RI "\fBcomponent_state_t\fP * \fBcreate_state_instance\fP () override"
.br
.ti -1c
.RI "\fBevent_handler_t\fP * \fBevent_handler\fP () override"
.br
.ti -1c
.RI "void \fBredraw\fP (\fBcydui::layout::Layout\fP *layout) override"
.br
.ti -1c
.RI "void \fBget_fragment\fP (\fBcydui::layout::Layout\fP *layout, \fBcydui::compositing::compositing_node_t\fP *compositing_node) override"
.br
.ti -1c
.RI "\fBcomponent_base_t\fP * \fBfind_by_coords\fP (int \fBx\fP, int \fBy\fP) override"
.br
.ti -1c
.RI "\fBcomponent_dimensional_relations_t\fP \fBget_dimensional_relations\fP () override"
.br
.in -1c

Public Member Functions inherited from \fBcydui::components::component_base_t\fP
.in +1c
.ti -1c
.RI "virtual \fB~component_base_t\fP ()=default"
.br
.in -1c

Public Member Functions inherited from \fBattr_x< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_x\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBx\fP (auto &_x_)"
.br
.ti -1c
.RI "\fBT\fP & \fBx\fP (auto &&_x_)"
.br
.in -1c

Public Member Functions inherited from \fBattribute_i\fP
.in +1c
.ti -1c
.RI "virtual \fB~attribute_i\fP ()=default"
.br
.in -1c

Public Member Functions inherited from \fBattr_y< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_y\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBy\fP (auto &_y_)"
.br
.ti -1c
.RI "\fBT\fP & \fBy\fP (auto &&_y_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_w< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_w\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBw\fP (auto &_w_)"
.br
.ti -1c
.RI "\fBT\fP & \fBw\fP (auto &&_w_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_h< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_h\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBh\fP (auto &_h_)"
.br
.ti -1c
.RI "\fBT\fP & \fBh\fP (auto &&_h_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_margin_top< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_margin_top\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_top\fP (auto &_margin_top_)"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_top\fP (auto &&_margin_top_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_margin_bottom< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_margin_bottom\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_bottom\fP (auto &_margin_bottom_)"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_bottom\fP (auto &&_margin_bottom_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_margin_left< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_margin_left\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_left\fP (auto &_margin_left_)"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_left\fP (auto &&_margin_left_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_margin_right< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_margin_right\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_right\fP (auto &_margin_right_)"
.br
.ti -1c
.RI "\fBT\fP & \fBmargin_right\fP (auto &&_margin_right_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_padding_top< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_padding_top\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_top\fP (auto &_padding_top_)"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_top\fP (auto &&_padding_top_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_padding_bottom< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_padding_bottom\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_bottom\fP (auto &_padding_bottom_)"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_bottom\fP (auto &&_padding_bottom_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_padding_left< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_padding_left\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_left\fP (auto &_padding_left_)"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_left\fP (auto &&_padding_left_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_padding_right< T >\fP
.in +1c
.ti -1c
.RI "\fB~attr_padding_right\fP () override=default"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_right\fP (auto &_padding_right_)"
.br
.ti -1c
.RI "\fBT\fP & \fBpadding_right\fP (auto &&_padding_right_)"
.br
.in -1c

Public Member Functions inherited from \fBattr_content< T >\fP
.in +1c
.ti -1c
.RI "\fBT\fP & \fBoperator()\fP (auto &&_content_)"
.br
.ti -1c
.RI "\fBT\fP & \fBoperator()\fP (auto &_content_)"
.br
.in -1c
.SS "Private Attributes"

.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fBcx\fP"
.br
.RI "Private attributes\&. "
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fBcy\fP"
.br
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fBcw\fP"
.br
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fBch\fP"
.br
.ti -1c
.RI "\fBlazy_alloc\fP< EVH > \fBevent_handler_\fP {}"
.br
.in -1c
.SS "Additional Inherited Members"


Public Attributes inherited from \fBcydui::components::component_base_t\fP
.in +1c
.ti -1c
.RI "std::optional< \fBcomponent_state_t\fP * > \fBstate\fP = std::nullopt"
.br
.ti -1c
.RI "std::optional< \fBcomponent_base_t\fP * > \fBparent\fP = std::nullopt"
.br
.ti -1c
.RI "std::vector< \fBcomponent_base_t\fP * > \fBchildren\fP {}"
.br
.ti -1c
.RI "std::vector< \fBcydui::events::listener_t\fP * > \fBsubscribed_listeners\fP {}"
.br
.in -1c

Public Attributes inherited from \fBattr_x< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_x\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_y< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_y\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_w< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_w\fP"
.br
.ti -1c
.RI "bool \fB_w_has_changed\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_h< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_h\fP"
.br
.ti -1c
.RI "bool \fB_h_has_changed\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_margin_top< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_margin_top\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_margin_bottom< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_margin_bottom\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_margin_left< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_margin_left\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_margin_right< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_margin_right\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_padding_top< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_padding_top\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_padding_bottom< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_padding_bottom\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_padding_left< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_padding_left\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_padding_right< T >\fP
.in +1c
.ti -1c
.RI "\fBcydui::dimensions::dimension_t\fP \fB_padding_right\fP"
.br
.in -1c

Public Attributes inherited from \fBattr_content< T >\fP
.in +1c
.ti -1c
.RI "std::function< \fBcontent\fP()> \fB_content\fP"
.br
.in -1c

Protected Member Functions inherited from \fBcydui::components::component_base_t\fP
.in +1c
.ti -1c
.RI "void \fBadd_event_listeners\fP (const std::unordered_map< std::string, event_handler_t::listener_data_t > &listeners)"
.br
.ti -1c
.RI "void \fBclear_subscribed_listeners\fP ()"
.br
.in -1c
.SH "Detailed Description"
.PP 

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP>
.br
struct cydui::components::component_t< EVH, T >"
.PP
Definition at line \fB122\fP of file \fBcomponent\&.h\fP\&.
.SH "Constructor & Destructor Documentation"
.PP 
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcydui::components::component_t\fP< EVH, \fBT\fP >::~\fBcomponent_t\fP ()\fC [inline]\fP, \fC [override]\fP"

.PP
Definition at line \fB134\fP of file \fBcomponent\&.h\fP\&..PP
.nf
134                               {
135         for (auto &child: children) {
136           delete child;
137         }
138         children\&.clear();
139         clear_subscribed_listeners();
140         if (state\&.has_value()) {
141           state\&.value()\->component_instance = std::nullopt;
142         }
143       };
.fi

.SH "Member Function Documentation"
.PP 
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > void \fBcydui::components::component_t\fP< EVH, \fBT\fP >::clear_children ()\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB162\fP of file \fBcomponent\&.h\fP\&..PP
.nf
162                                      {
163         for (auto &child: children) {
164           delete child;
165         }
166         children\&.clear();
167       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > void \fBcydui::components::component_t\fP< EVH, \fBT\fP >::configure_event_handler ()\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB145\fP of file \fBcomponent\&.h\fP\&..PP
.nf
145                                               {
146         EVH * evh = event_handler_\&.operator\->();
147         if (parent\&.has_value()) {
148           evh\->parent = parent\&.value()\->event_handler();
149         } else {
150           evh\->parent = nullptr;
151         }
152         evh\->state = (typename T::state_t*) state\&.value();
153         evh\->props = &(((T*) this)\->props);
154         evh\->attrs = (attrs_component<T>*) this;
155         evh\->get_dim = [this] {return get_dimensional_relations();};
156       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcomponent_state_t\fP * \fBcydui::components::component_t\fP< EVH, \fBT\fP >::create_state_instance ()\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB169\fP of file \fBcomponent\&.h\fP\&..PP
.nf
169                                                           {
170         return new typename T::state_t;
171       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBevent_handler_t\fP * \fBcydui::components::component_t\fP< EVH, \fBT\fP >::event_handler ()\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB172\fP of file \fBcomponent\&.h\fP\&..PP
.nf
172                                                 {
173         return event_handler_;
174       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcomponent_base_t\fP * \fBcydui::components::component_t\fP< EVH, \fBT\fP >::find_by_coords (int x, int y)\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB259\fP of file \fBcomponent\&.h\fP\&..PP
.nf
259                                                               {
260         component_base_t* found = nullptr;
261         for (auto c = children\&.rbegin(); c != children\&.rend(); ++c) {
262           found = (*c)\->find_by_coords(x, y);
263           if (nullptr != found) {
264             return found;
265           }
266         }
267         if (cx\&.val() <= x && x < cx\&.val() + cw\&.val()) {
268           if (cy\&.val() <= y && y < cy\&.val() + ch\&.val()) {
269             return this;
270           }
271         }
272         return nullptr;
273       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcomponent_dimensional_relations_t\fP \fBcydui::components::component_t\fP< EVH, \fBT\fP >::get_dimensional_relations ()\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB275\fP of file \fBcomponent\&.h\fP\&..PP
.nf
275                                                                              {
276         return {
277           this\->_x,
278           this\->_y,
279           this\->_w,
280           this\->_h,
281           this\->_w_has_changed,
282           this\->_h_has_changed,
283           this\->cx,
284           this\->cy,
285           this\->cw,
286           this\->ch,
287           this\->_margin_top,
288           this\->_margin_bottom,
289           this\->_margin_left,
290           this\->_margin_right,
291           this\->_padding_top,
292           this\->_padding_bottom,
293           this\->_padding_left,
294           this\->_padding_right,
295         };
296       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > void \fBcydui::components::component_t\fP< EVH, \fBT\fP >::get_fragment (\fBcydui::layout::Layout\fP * layout, \fBcydui::compositing::compositing_node_t\fP * compositing_node)\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB223\fP of file \fBcomponent\&.h\fP\&..PP
.nf
223                                                                                                              {
224         for (auto &child: children) {
225           auto* child_node = new cydui::compositing::compositing_node_t;
226           compositing_node\->children\&.push_back(child_node);
227           child\->get_fragment(layout, child_node);
228         }
229         
230         compositing_node\->id = (unsigned long) (this\->state\&.value());
231         compositing_node\->op = {
232           \&.x = this\->_x\&.val(),
233           \&.y = this\->_y\&.val(),
234           \&.orig_x = this\->_margin_left\&.val() + this\->_padding_left\&.val(),
235           \&.orig_y = this\->_margin_top\&.val() + this\->_padding_top\&.val(),
236           \&.w = this\->_w\&.val(),
237           \&.h = this\->_h\&.val(),
238           \&.rot = 0\&.0, // dim\->rot\&.val(),
239           \&.scale_x = 1\&.0, // dim\->scale_x\&.val(),
240           \&.scale_y = 1\&.0, // dim\->scale_y\&.val(),
241         };
242         
243         auto &fragment = compositing_node\->graphics;
244         fragment\&.clear();
245         event_handler_\->draw_fragment(fragment);
246         if (!fragment\&.empty()) {
247           for (const auto &elem: fragment\&.elements) {
248             auto fp = elem\->get_footprint();
249             if (fp\&.x + fp\&.w > compositing_node\->op\&.w) {
250               compositing_node\->op\&.w = fp\&.x + fp\&.w;
251             }
252             if (fp\&.y + fp\&.h > compositing_node\->op\&.h) {
253               compositing_node\->op\&.h = fp\&.y + fp\&.h;
254             }
255           }
256         }
257       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > void \fBcydui::components::component_t\fP< EVH, \fBT\fP >::redraw (\fBcydui::layout::Layout\fP * layout)\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB176\fP of file \fBcomponent\&.h\fP\&..PP
.nf
176                                                       {
177         std::vector<component_holder_t> new_children = this\->_content();
178         std::vector<component_holder_t> redraw_children = event_handler_\->on_redraw();
179         for (auto &item: redraw_children) {
180           new_children\&.push_back(item);
181         }
182         
183         std::size_t id_i = 0;
184         for (auto &item: new_children) {
185           for (auto &component_pair: item\&.get_components()) {
186             auto [id_, component] = component_pair;
187             std::string id = id_;
188             id\&.append(":");
189             id\&.append(std::to_string(id_i));
190             
191             // Get or Create state for component
192             component_state_t* child_state;
193             if (state\&.value()\->children_states\&.contains(id)) {
194               child_state = state\&.value()\->children_states[id];
195             } else {
196               child_state = component\->create_state_instance();
197               state\&.value()\->children_states[id] = child_state;
198             }
199             
200             // Set child's variables
201             component\->state = child_state;
202             child_state\->win = state\&.value()\->win;
203             child_state\->parent = state\&.value();
204             child_state\->component_instance = component;
205             component\->parent = this;
206             children\&.push_back(component);
207             //printf("CHILDREN LEN: %d\\n", children\&.size());
208             
209             // Configure event handler
210             component\->configure_event_handler();
211             
212             // Subscribe child events
213             component\->subscribe_events();
214             // Redraw child
215             component\->redraw(layout);
216             
217           }
218           ++id_i;
219         }
220       }
.fi

.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > void \fBcydui::components::component_t\fP< EVH, \fBT\fP >::subscribe_events ()\fC [inline]\fP, \fC [override]\fP, \fC [virtual]\fP"

.PP
Implements \fBcydui::components::component_base_t\fP\&.
.PP
Definition at line \fB157\fP of file \fBcomponent\&.h\fP\&..PP
.nf
157                                        {
158         clear_subscribed_listeners();
159         EVH * evh = event_handler_\&.operator\->();
160         add_event_listeners(evh\->get_event_listeners());
161       }
.fi

.SH "Member Data Documentation"
.PP 
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcydui::dimensions::dimension_t\fP \fBcydui::components::component_t\fP< EVH, \fBT\fP >::ch\fC [private]\fP"

.PP
Definition at line \fB129\fP of file \fBcomponent\&.h\fP\&.
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcydui::dimensions::dimension_t\fP \fBcydui::components::component_t\fP< EVH, \fBT\fP >::cw\fC [private]\fP"

.PP
Definition at line \fB128\fP of file \fBcomponent\&.h\fP\&.
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcydui::dimensions::dimension_t\fP \fBcydui::components::component_t\fP< EVH, \fBT\fP >::cx\fC [private]\fP"

.PP
Private attributes\&. 
.PP
Definition at line \fB126\fP of file \fBcomponent\&.h\fP\&.
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBcydui::dimensions::dimension_t\fP \fBcydui::components::component_t\fP< EVH, \fBT\fP >::cy\fC [private]\fP"

.PP
Definition at line \fB127\fP of file \fBcomponent\&.h\fP\&.
.SS "template<ComponentEventHandlerConcept EVH, typename \fBT\fP > \fBlazy_alloc\fP<EVH> \fBcydui::components::component_t\fP< EVH, \fBT\fP >::event_handler_ {}\fC [private]\fP"

.PP
Definition at line \fB131\fP of file \fBcomponent\&.h\fP\&..PP
.nf
131 {};
.fi


.SH "Author"
.PP 
Generated automatically by Doxygen for CYD-UI from the source code\&.
